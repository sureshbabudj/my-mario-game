const N=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&l(p)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}};N();var P="/my-mario-game/assets/platform.e412fb3e.png",A="/my-mario-game/assets/clouds.e8ffd385.jpg",F="/my-mario-game/assets/player.b7d76502.png",T="/my-mario-game/assets/brick.6ac99042.jpg";const h=document.getElementById("canvas"),a=h.getContext("2d");h.height=576;h.width=1024;const d=5,M=1.5,o={left:{pressed:!1},right:{pressed:!1},up:{pressed:!1},down:{pressed:!1}},k=1842;let s,c,g,f,y,m,u;function w(t){const e=new Image;return e.src=t,e}class S{constructor(){this.height=130/2,this.width=864/8/2,this.pos={x:100,y:100},this.color="red",this.velocity={x:0,y:0},this.image=w(F),this.frames=0,this.motions={leftIdle:!1,rightIdle:!0,leftWalk:!1,rightWalk:!1}}draw(){const e=864/8;this.motions.rightWalk?a.drawImage(this.image,e*this.frames,0,e,130,this.pos.x,this.pos.y,this.width,this.height):this.motions.leftWalk?a.drawImage(this.image,e*7-e*this.frames,140,e,130,this.pos.x,this.pos.y,this.width,this.height):this.motions.leftIdle?a.drawImage(this.image,e*7,140,e,130,this.pos.x,this.pos.y,this.width,this.height):this.motions.rightIdle&&a.drawImage(this.image,0,0,e,130,this.pos.x,this.pos.y,this.width,this.height),this.frames++,this.frames>=8&&(this.frames=0)}update(){this.draw(),this.pos.x+=this.velocity.x,this.pos.y+=this.velocity.y,this.velocity.y+=M}}class E{constructor({x:e,y:n,index:l,gap:i,image:r,width:p,height:j}){this.index=l,this.image=w(r),this.width=p||k/2,this.height=j||238/2,this.gap=i,this.velocity={x:0,y:0},this.pos={x:e||this.width*this.index+this.gap,y:n||h.height-this.height}}draw(){a.drawImage(this.image,this.pos.x,this.pos.y,this.width,this.height)}}class q{constructor({x:e,y:n,index:l,gap:i}){this.index=l,this.image=w(A),this.width=this.image.width||820/2,this.height=this.image.height||399/2,this.gap=i,this.velocity={x:0,y:0},this.pos={x:e||this.width*this.index+this.gap,y:60}}draw(){a.drawImage(this.image,this.pos.x,this.pos.y,this.width,this.height)}}function x(){a.clearRect(0,0,h.width,h.height)}function v(t,e,n,l,i){a.fillStyle=e,a.font=n,a.fillText(t,l,i)}function b(){removeEventListener("keydown",L),removeEventListener("keyup",O),u="off",addEventListener("keydown",({keyCode:t})=>{t===13&&W()}),v("Press ENTER to replay","red","bold 16px Arial",h.width/2+40,h.height-20)}function I(){u==="on"&&requestAnimationFrame(I),x(),g.forEach(t=>t.draw()),c.forEach(t=>t.draw()),s.update(),o.left.pressed&&s.pos.x>=h.width/10?s.velocity.x=-d:o.right.pressed&&s.pos.x<=h.width/2?s.velocity.x=d:(s.velocity.x=0,o.left.pressed&&f>0?(f-=d,c.forEach(t=>t.pos.x+=d),g.forEach(t=>t.pos.x+=d-2)):o.right.pressed&&(f+=d,c.forEach(t=>t.pos.x-=d),g.forEach(t=>t.pos.x-=2))),c.forEach(t=>{s.pos.y+s.height<=t.pos.y&&s.pos.y+s.height+s.velocity.y>=t.pos.y&&s.pos.x+s.width>=t.pos.x&&s.pos.x<=t.pos.x+t.width&&(s.velocity.y=0)}),console.log(f),f>=m&&(console.log("you win"),x(),v("You Win!","green","50px Arial",100,h.height/2),b()),s.pos.y+s.height>=h.height&&(console.log("you lose"),x(),v("You Lose!","red","50px Arial",100,h.height/2),b())}function L({keyCode:t}){switch(console.log(t),t){case 87:case 38:o.up.pressed=!0,s.velocity.y=-30,s.pos.y<0&&(s.velocity.y+=30);break;case 65:case 37:o.left.pressed=!0,Object.keys(s.motions).forEach(e=>e==="leftWalk"?s.motions[e]=!0:s.motions[e]=!1);break;case 83:case 40:o.down.pressed=!0;break;case 68:case 39:o.right.pressed=!0,Object.keys(s.motions).forEach(e=>e==="rightWalk"?s.motions[e]=!0:s.motions[e]=!1);break}}function O({keyCode:t}){switch(t){case 87:case 38:o.up.pressed=!1,s.velocity.y=0;break;case 65:case 37:o.left.pressed=!1,Object.keys(s.motions).forEach(e=>e==="leftIdle"?s.motions[e]=!0:s.motions[e]=!1);break;case 83:case 40:o.down.pressed=!1;break;case 68:case 39:o.right.pressed=!1,Object.keys(s.motions).forEach(e=>e==="rightIdle"?s.motions[e]=!0:s.motions[e]=!1);break}}function W(){addEventListener("keydown",L),addEventListener("keyup",O),u="on",o.left.pressed=!1,o.right.pressed=!1,o.up.pressed=!1,o.down.pressed=!1,f=0,c=[],g=[],y=[],s=new S,m=k*8;for(let t=0;t<10;t++){const e=t*150;m=m+e;const n=new E({index:t,gap:e,image:P});y.push(new E({y:200,index:t,gap:e+3e3,image:T,width:326/3,height:100/3})),c.push(n),g.push(new q({index:t,gap:e}))}c=[...c,...y],I()}W();
